{% extends 'base.html' %}

{% block extratitle %}{{product}}{% endblock %}

{% block extrastyle %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/products/product.css') }}">
{% endblock %}

{% block content %}

{% if product %}
<h1>{{product}}</h1>

<div class="container dark-grey-text mt-5">
  <div class="row wow fadeIn">
    
    <div class="col-md-6 mb-4">
      <script>
        $('.carousel').carousel()

        function myFunction() {
          var x = document.getElementById("myDIV");
          if (x.style.display === "none") {
            x.style.display = "block";
          } else {
            x.style.display = "none";
          }
        }
    </script>
    
    
    <div id="carouselExampleControls"  class="carousel slide " data-ride="carousel" style="margin-bottom: 18px;"
         data-interval="2000">
        <div class="carousel-inner" style="height: 350px;">
            {%for image in product.images %}
            {% if loop.first %}
            <div class="carousel-item active"  style="max-height: 350px; object-fit: cover;">
                <img class="d-block w-100" style="height: 350px;" src="{{url_for('static', filename=image.path)}}" alt="Second slide">
            </div>
            {% else %}
            <div class="carousel-item"  style="max-height: 350px;">
                <img class="d-block w-100" style="height: 350px;" src="{{url_for('static', filename=image.path)}}" alt="Second slide">
            </div>
            {% endif %}
            {%endfor%}
        </div>
        <a class="carousel-control-prev" href="#carouselExampleControls" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true" style="height: 350px;"></span>
            <span class="sr-only">Previous</span>
        </a>
        <a class="carousel-control-next" href="#carouselExampleControls" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true" style="height: 350px;"></span>
            <span class="sr-only">Next</span>
        </a>
    </div>
    </div>



    <div class="col-md-6 mb-4">
      <div class="p-4">
        <div class="mb-3">
          {% for category in product.product_category %}
          <a href="#">
            <span class="badge badge-pill badge-info mr-3">{{category.name}}</span>
          </a>
          {% endfor %}
        </div>

        <p class="lead"><span>Price: {{product.price}}$</span></p>
        <p><span>Quantity: {{product.quantity}}</span></p>
        <p class="lead font-weight-bold">Description</p>
        <p>{{product.description|truncate(200, True)}}</p>
        
        <span id="myDIV" style="display: none;">{{product.description[product.description|truncate(197, True)|length::]}}</span>
        <button onclick="myFunction()" class="btn btn-link mb-4 p-0" style="color:blue">Show</button>

        <form class="d-flex justify-content-left">
          <input type="number" value="1" aria-label="Search" class="form-control" style="width: 100px">
          <button class="btn btn-primary btn-md my-0 p" type="submit">Add to cart
            <i class="fas fa-shopping-cart ml-1"></i>
          </button>
        </form>
        {% if current_user.email == product.owner %}
        <div class="mt-5">
          <a href="{{url_for('edit_product', id=product.id)}}" class="btn btn-light">Edit</a>
        </div>
        {% endif %}
      </div>
    </div>
  </div>
{% else %}
<h1>Product Not Found</h1>
<div class="mt-5">
<h2>Sorry the link you are pointing is not available or not found</h2>
</div>

{% endif %}
{% endblock %}