{% extends 'base.html' %}

{%block extratitle%}Card{%endblock%}

{% block extrastyle %}
<link rel="stylesheet" href="{{url_for('static', filename='css/products/card.scss')}}">
{%endblock%}

{% block content %}

{% if card %}
<!--Grid column-->
<div class="col-md-5 mx-auto my-auto">

    <!-- Heading -->
    <h4 class="d-flex justify-content-between align-items-center mb-3 mt-5">
      <span class="text-muted">Your cart</span>
      <span class="badge badge-primary badge-pill">{{card.get_quantity()}}</span>
    </h4>

    <!-- Cart -->
    <ul class="list-group mb-3 z-depth-1">
        {% for order in card.product_order %}
      <li class="list-group-item d-flex justify-content-between lh-condensed">
          <div class="row">
            <div class="col-3">
                <a href="{{url_for('product_page', id=order.product)}}">
                    <img style="max-width: 100%;" src="{{url_for('static', filename=order.product_obj.images[0].path)}}" alt="APE">
                </a>
            </div>
            <div class="col-9" style="max-width: 500px;">
                <h4 class="my-0">{{order.product_obj}}</h4>
                <small class="text-muted">{{order.product_obj.description|truncate(125, true) }}</small>
            </div>
          </div>
          
        <span class="text-muted">{{order.quantity}} </span><span class="text-muted px-1" style="font-size: small;">  x  </span><span class="text-muted"> {{order.product_obj.price}}</span>
      </li>
      {% endfor %}
      
      {% if card.product_order %}
      <li class="list-group-item d-flex justify-content-between">
        <span>Total (USD):  <strong>{{card.get_total_price()}}</strong></span>
        <a href="{{url_for('checkout', cart_id=card.id)}}" class="btn btn-primary btn-md waves-effect m-0" type="button">Buy</a>
      </li>
      {% endif %}
    </ul>
    <!-- Cart -->

  </div>
  <!--Grid column-->

  {% endif %}
{% endblock %}